<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>è‰ç§¯åˆ†ç©ºæŠ•ä¼°ç®—</title>
  <style>
    body { font-family: sans-serif; padding: 20px; max-width: 800px; margin: auto; }
    h2 { color: #333; display: flex; align-items: center; gap: 10px; }
    textarea, input { padding: 8px; width: 100%; margin-top: 10px; }
    button {
      padding: 6px 12px; margin-top: 10px; cursor: pointer;
      background-color: #4CAF50; color: white; border: none; border-radius: 4px;
    }
    button:hover { background-color: #45a049; }
    #output {
      white-space: pre-wrap; background: #f6f6f6;
      padding: 12px; border-radius: 8px;
      margin-top: 20px; font-size: 14px;
    }
    table {
      width: 100%; margin-top: 20px; border-collapse: collapse;
    }
    th, td {
      padding: 8px; border: 1px solid #ccc; text-align: center;
    }
    th { background-color: #eee; }
    .error { color: red; font-weight: bold; }
    .small-note { font-size: 13px; color: #888; margin-top: 4px; }
    .tip { font-size: 13px; color: #555; }
  </style>
</head>
<body>
  <h2>ğŸ’° ç©ºæŠ•é‡‘é¢ä¼°ç®— <a href="https://x.com/0xXIAOc" target="_blank" style="font-size:14px;">by @0xXIAOc</a></h2>

  <label>å‡è®¾ FDVï¼ˆå•ä½ï¼šå…ƒï¼‰ï¼š
    <input id="fdvInput" placeholder="ä¾‹å¦‚ 600000000" value="600000000">
  </label>

  <p class="tip">è‰æ€»é‡ = 943.27 äº¿è‰ï¼ˆå‰ 25 ä¸‡åœ°å€ç»Ÿè®¡ï¼‰</p>

  <label>ä½ æ‹¥æœ‰çš„è‰æ•°é‡ï¼š</label>
  <input id="myGrass" value="100000" oninput="formatGrass()" />
  <div id="formattedGrass" class="small-note"></div>

  <label>ç©ºæŠ•ç™¾åˆ†æ¯”ï¼ˆå¤šä¸ªç”¨é€—å·åˆ†éš”ï¼‰ï¼š</label>
  <input id="percentInput" placeholder="ä¾‹å¦‚ï¼š3,5,10,15,20" />

  <button onclick="updateAirdropTable(this)">è®¡ç®—</button>

  <div id="errorMsg" class="error"></div>

  <table>
    <thead>
      <tr>
        <th>ç©ºæŠ•ç™¾åˆ†æ¯”</th>
        <th>ç©ºæŠ•é‡‘é¢ï¼ˆä¸‡å…ƒï¼‰</th>
        <th>æ¯è‰ä»·æ ¼ï¼ˆUSDï¼‰</th>
        <th>ä½ çš„è‰ä»·å€¼ï¼ˆUSDï¼‰</th>
      </tr>
    </thead>
    <tbody id="airdropTableBody"></tbody>
  </table>

<script>
  function formatNumber(num) {
    return num.toLocaleString("en-US");
  }

  function formatGrass() {
    const val = parseFloat(document.getElementById("myGrass").value) || 0;
    let display = "";
    if (val >= 1e8) display = (val / 1e8).toFixed(2) + " äº¿è‰";
    else if (val >= 1e4) display = (val / 1e4).toFixed(2) + " ä¸‡è‰";
    else display = val + " è‰";
    document.getElementById("formattedGrass").innerText = `â‰ˆ ${display}`;
  }

  function updateAirdropTable(btn) {
    const errorEl = document.getElementById("errorMsg");
    errorEl.innerText = "";

    const FDV = parseFloat(document.getElementById("fdvInput").value) || 0;
    const totalGrass = 94327000000; // 943.27äº¿è‰
    const myGrass = parseFloat(document.getElementById("myGrass").value) || 0;
    const percentStr = document.getElementById("percentInput").value;

    const percents = percentStr.split(",").map(p => parseFloat(p.trim())).filter(p => !isNaN(p) && p > 0 && p <= 100);

    if (percents.length === 0) {
      errorEl.innerText = "âš ï¸ ç©ºæŠ•ç™¾åˆ†æ¯”æ ¼å¼é”™è¯¯ï¼Œè¯·è¾“å…¥å¦‚ï¼š3,5,10";
      return;
    }

    // æŒ‰é’® loading æ•ˆæœ
    const originalText = btn.innerText;
    btn.innerText = "è®¡ç®—ä¸­...";
    btn.disabled = true;

    setTimeout(() => {
      let html = "";

      percents.forEach(pct => {
        const airdropAmount = FDV * (pct / 100);
        const grassPrice = airdropAmount / totalGrass;
        const myValue = myGrass * grassPrice;

        html += `<tr>
          <td>${pct}%</td>
          <td>${(airdropAmount / 10000).toFixed(2)}</td>
          <td>$${grassPrice.toFixed(6)}</td>
          <td>$${myValue.toFixed(2)}</td>
        </tr>`;
      });

      document.getElementById("airdropTableBody").innerHTML = html;
      btn.innerText = originalText;
      btn.disabled = false;
    }, 500);
  }

  formatGrass();
</script>
</body>
</html>
